<?php

namespace Brasa\TransporteBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * MovimientosRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class TteConfiguracionRepository extends EntityRepository {

    public function consecutivoDespacho() {        
        $em = $this->getEntityManager();
        $arEntidad = new \Brasa\GeneralBundle\Entity\GenEntidades();
        $arEntidad = $em->getRepository('BrasaGeneralBundle:GenEntidades')->find($codigoEntidad);
        $intConsecutivo = $arEntidad->getTteConsecutivoDespachos();
        $arEntidad->setTteConsecutivoDespachos($arEntidad->getTteConsecutivoDespachos() + 1);        
        $em->persist($arEntidad);
        $em->flush();
        return $intConsecutivo;
    }  
}